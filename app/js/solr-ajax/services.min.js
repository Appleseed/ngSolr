angular.module("Services",[]).factory("SelectionSetService",["$rootScope",function(e){var b={documents:{},multipleSelection:!1};Array.prototype.remove=function(a,c){var b=this.slice((c||a)+1||this.length);this.length=0>a?this.length+a:a;return this.push.apply(this,b)};b.add=function(a,c){b.multipleSelection||(b.documents={});b.documents[a]=c;e.$broadcast("selectionSetUpdate")};b.clear=function(){b.documents={};e.$broadcast("selectionSetUpdate")};b.get=function(a){return b.documents[a]};b.getSelectionSet=
function(){return b.documents};b.remove=function(a){delete b.documents[a];e.$broadcast("selectionSetUpdate")};return b}]);"use strict";
function SolrFacet(e,b){var a=this;a.field=e;a.value=b;a.options={};a.getOption=function(c){if("q"!=c&&a.options[c])return a.options[c]};a.getUrlFragment=function(){var c;c="&&"+("&fq="+a.field+":("+a.replaceSpaces(a.value)+")");for(var b in a.options)a.options.hasOwnProperty(b)&&(c=c+"&"+b+"="+a.options[b]);return c};a.replaceSpaces=function(a){return a.replace(" ","?")};a.setOption=function(c,b){a.options[c]=b};a.setOptionsFromQuery=function(c){c=c.split("&");for(var b=0;b<c.length;b++){var f=c[b];
if(null!=f&&""!=f){var f=f.split("="),h=f[0].replace("&","");"fq"==h?2==f.length&&(f=f[1].split(":"),a.field=f[0],a.value=f[1]):2==f.length?a.setOption(h,decodeURI(f[1])):a.setOption(h,"")}}}}
function SolrQuery(e,b){var a=this;a.facets={};a.facet_counts={};a.highlighting={};a.options={};a.response={};a.responseHeader={};a.query="*:*";a.queryParameters={};a.url=e+"/"+b+"/select?";a.addFacet=function(c,b){a.facets[c]=b};a.getFacetCounts=function(){return a.facet_counts};a.getFacets=function(){var c=[],b;for(b in a.facets)c.push(a.facets[b]);return c};a.getFacetsAsDictionary=function(){return a.facets};a.getHash=function(){var c;c="q="+a.query;for(var b in a.queryParameters)c+=a.queryParameters[b];
for(b in a.options)c+="&"+b+"="+a.options[b];for(b in a.facets)c+=a.facets[b].getUrlFragment();return c};a.getOption=function(c){if(a.options[c])return a.options[c]};a.getUrl=function(){return a.url+encodeURI(a.getHash())};a.getUserQuery=function(){return a.query};a.getUserQueryParameters=function(){return a.queryParameters};a.removeFacet=function(c){for(var b in a.facets)if(a.facets[b].field==c){delete a.facets[b];break}};a.removeOption=function(c){delete a.options[c]};a.setFacetCounts=function(c){a.facet_counts=
c};a.setHighlighting=function(c){a.highlighting=c};a.setOption=function(c,b){if("fq"===c){var f=a.getOption(c);a.options[c]=void 0!=f&&""==f?f+" +"+b:"+"+b}else a.options[c]=b};a.setQuery=function(c){a.query=c};a.setQueryFromHash=function(c){c=c.split("&");for(var b=0;b<c.length;b++){var f=c[b];if(null!=f&&""!=f){var f=f.split("="),h=f[0].replace("&","");2==f.length?a.setOption(h,decodeURI(f[1])):a.setOption(h,"")}}};a.setQueryParameter=function(c,b){a.queryParameters[c]=b};a.setQueryParameters=function(c){a.queryParameters=
c};a.setResponse=function(c){a.response=c};a.setResponseHeader=function(c){a.responseHeader=c}}
angular.module("Services",[]).factory("SolrSearchService",["$rootScope","$http","$location","CONSTANTS",function(e,b,a,c){var d={error:void 0,message:void 0,queries:{},createFacet:function(a,c){return new SolrFacet(a,c)},createQuery:function(){var a=new SolrQuery(c.SOLR_BASE,c.SOLR_CORE);a.setOption("rows",c.ITEMS_PER_PAGE);a.setOption("fl",c.DEFAULT_FIELDS);a.setOption("wt","json");a.setQuery(c.DEFAULT_QUERY);return a},getCurrentQuery:function(a){var b=a.indexOf(c.QUERY_DELIMITER);if(-1!=b){a.substring(1,
b).replace(RegExp("/","g"),"");a=a.substring(b+1).split(c.FACET_DELIMITER);if(0<a.length){var g=new SolrQuery(c.SOLR_BASE,c.SOLR_CORE);g.setOption("fl",c.DEFAULT_FIELDS);g.setOption("hl.fl",d.highlightingParameters);g.setOption("indent","on");g.setOption("rows",d.itemsPerPage);g.setOption("start",0);g.setOption("version",c.SOLR_VERSION);g.setOption("wt","json");g.setQueryFromHash(a[0]);g.setQuery("q",c.DEFAULT_QUERY);for(b=1;b<a.length;b++){var e=a[b],k=new SolrFacet;k.setOptionsFromQuery(e);g.facets.push(k)}}return g}},
getQuery:function(a){return a?d.queries[a]:d.queries.defaultQuery},getResponse:function(a){return a?d.queries[a].response:d.queries.defaultQuery.response},init:function(a,c,b){d.windowLocationHasQuery(window.location.hash,a.QUERY_DELIMITER)?d.queries.defaultQuery=d.getCurrentQuery($scope,window.location.hash,a):d.queries.defaultQuery=d.createQuery(a,c,b)},isValidQuery:function(a){for(var c=0;c<a.length;c++)if(null!=a[c]&&" "!=a[c])return!0;return!1},setPage:function(a,c){c?d.queries[c].setOption("start",
a):d.queries.defaultQuery.setOption("start",a)},setQuery:function(a,c){c?d.queries[c]=a:d.queries.defaultQuery=a},setWindowLocation:function(a,c,b){a="";c.view&&(a=c.view);c.query&&(a=a+"/"+b+c.query.getHash());console.log("Setting hash as: "+a);window.location.hash=a},handleFacetListUpdate:function(){d.error=null;d.message=null;for(var a in d.queries)d.queries.hasOwnProperty(a)&&d.updateQuery(a)},updateQuery:function(a){d.error=null;d.message=null;var c=d.queries[a];if(c){var g=c.getUrl();console.log("GET "+
a+": "+g);b.get(g).success(function(b){c.setHighlighting(b.highlighting);b.hasOwnProperty("facet_counts")&&c.setFacetCounts(b.facet_counts);c.setResponse(b.response);c.setResponseHeader(b.responseHeader);e.$broadcast(a)}).error(function(b,g,m,n){d.error="Could not get search results from server. Server responded with status code "+g+".";c.setFacetCounts([]);c.setHighlighting({});c.setResponse({numFound:0,start:0,docs:[]});c.setResponseHeader({});e.$broadcast(a)})}},windowLocationHasQuery:function(a,
c){return-1!=a.indexOf(c)}};d.init(c,b,e);return d}]).value("version","0.1");"use strict";
angular.module("Services",[]).factory("Utils",[function(){var e={convertMonthIndexToName:function(b){return{"01":"January","02":"February","03":"March","04":"April","05":"May","06":"June","07":"July","08":"August","09":"September",10:"October",11:"November",12:"December"}[b]},formatDate:function(b){if(b){var a=b.indexOf("T");if(a){b=b.substring(0,a).split("-");var a=b[0],c=e.convertMonthIndexToName(b[1]);e.trimLeadingZero(b[2]);return c+", "+a}}return""},startsWith:function(b,a){return b&&a?b.slice(0,
a.length)==a:!1},trim:function(b){return b.replace(/^\s\s*/,"").replace(/\s\s*$/,"")},trimLeadingZero:function(b){b&&0<b.length&&"0"==b.substring(0,1)&&1<b.length&&(b=b.substring(1,1));return b},truncate:function(b,a){if(b&&a&&b.length>a){b=e.trim(b);b=b.substring(0,Math.min(a,b.length));var c=b.lastIndexOf(" ");-1!=c&&(b=b.substring(0,c)+" ...")}return b},truncateField:function(b,a,c){b&&b[a]&&(b[a]instanceof Array&&(b[a]=b[a][0]),b[a].length>c&&(b[a]=e.trim(b[a]),b[a]=b[a].substring(0,Math.min(c,
b[a].length)),c=b[a].lastIndexOf(" "),-1!=c&&(b[a]=b[a].substring(0,c)+" ...")))}};return e}]);"use strict";
angular.module("SelectionSetService",[]).factory("SelectionSetService",["$rootScope",function(e){var b={documents:{},multipleSelection:!1};Array.prototype.remove=function(a,c){var b=this.slice((c||a)+1||this.length);this.length=0>a?this.length+a:a;return this.push.apply(this,b)};b.add=function(a,c){b.multipleSelection||(b.documents={});b.documents[a]=c;e.$broadcast("selectionSetUpdate")};b.clear=function(){b.documents={};e.$broadcast("selectionSetUpdate")};b.get=function(a){return b.documents[a]};
b.getSelectionSet=function(){return b.documents};b.remove=function(a){delete b.documents[a];e.$broadcast("selectionSetUpdate")};return b}]);"use strict";
function SolrFacet(e,b){var a=this;a.field=e;a.value=b;a.options={};a.getOption=function(c){if("q"!=c&&a.options[c])return a.options[c]};a.getUrlFragment=function(){var c;c="&&"+("&fq="+a.field+":("+a.replaceSpaces(a.value)+")");for(var b in a.options)a.options.hasOwnProperty(b)&&(c=c+"&"+b+"="+a.options[b]);return c};a.replaceSpaces=function(a){return a.replace(" ","?")};a.setOption=function(c,b){a.options[c]=b};a.setOptionsFromQuery=function(c){c=c.split("&");for(var b=0;b<c.length;b++){var f=c[b];
if(null!=f&&""!=f){var f=f.split("="),h=f[0].replace("&","");"fq"==h?2==f.length&&(f=f[1].split(":"),a.field=f[0],a.value=f[1]):2==f.length?a.setOption(h,decodeURI(f[1])):a.setOption(h,"")}}}}
function SolrQuery(e,b){var a=this;a.facets={};a.facet_counts={};a.highlighting={};a.options={};a.response={};a.responseHeader={};a.query="*:*";a.queryParameters={};a.url=e+"/"+b+"/select?";a.addFacet=function(c,b){a.facets[c]=b};a.getFacetCounts=function(){return a.facet_counts};a.getFacets=function(){var c=[],b;for(b in a.facets)c.push(a.facets[b]);return c};a.getFacetsAsDictionary=function(){return a.facets};a.getHash=function(){var c;c="q="+a.query;for(var b in a.queryParameters)c+=a.queryParameters[b];
for(b in a.options)c+="&"+b+"="+a.options[b];for(b in a.facets)c+=a.facets[b].getUrlFragment();return c};a.getOption=function(c){if(a.options[c])return a.options[c]};a.getUrl=function(){return a.url+encodeURI(a.getHash())};a.getUserQuery=function(){return a.query};a.getUserQueryParameters=function(){return a.queryParameters};a.removeFacet=function(c){for(var b in a.facets)if(a.facets[b].field==c){delete a.facets[b];break}};a.removeOption=function(c){delete a.options[c]};a.setFacetCounts=function(c){a.facet_counts=
c};a.setHighlighting=function(c){a.highlighting=c};a.setOption=function(c,b){if("fq"===c){var f=a.getOption(c);a.options[c]=void 0!=f&&""==f?f+" +"+b:"+"+b}else a.options[c]=b};a.setQuery=function(c){a.query=c};a.setQueryFromHash=function(c){c=c.split("&");for(var b=0;b<c.length;b++){var f=c[b];if(null!=f&&""!=f){var f=f.split("="),h=f[0].replace("&","");2==f.length?a.setOption(h,decodeURI(f[1])):a.setOption(h,"")}}};a.setQueryParameter=function(c,b){a.queryParameters[c]=b};a.setQueryParameters=function(c){a.queryParameters=
c};a.setResponse=function(c){a.response=c};a.setResponseHeader=function(c){a.responseHeader=c}}
angular.module("SolrSearchService",[]).factory("SolrSearchService",["$rootScope","$http","$location","CONSTANTS",function(e,b,a,c){var d={error:void 0,message:void 0,queries:{},createFacet:function(a,c){return new SolrFacet(a,c)},createQuery:function(){var a=new SolrQuery(c.SOLR_BASE,c.SOLR_CORE);a.setOption("rows",c.ITEMS_PER_PAGE);a.setOption("fl",c.DEFAULT_FIELDS);a.setOption("wt","json");a.setQuery(c.DEFAULT_QUERY);return a},getCurrentQuery:function(a){var b=a.indexOf(c.QUERY_DELIMITER);if(-1!=
b){a.substring(1,b).replace(RegExp("/","g"),"");a=a.substring(b+1).split(c.FACET_DELIMITER);if(0<a.length){var g=new SolrQuery(c.SOLR_BASE,c.SOLR_CORE);g.setOption("fl",c.DEFAULT_FIELDS);g.setOption("hl.fl",d.highlightingParameters);g.setOption("indent","on");g.setOption("rows",d.itemsPerPage);g.setOption("start",0);g.setOption("version",c.SOLR_VERSION);g.setOption("wt","json");g.setQueryFromHash(a[0]);g.setQuery("q",c.DEFAULT_QUERY);for(b=1;b<a.length;b++){var e=a[b],k=new SolrFacet;k.setOptionsFromQuery(e);
g.facets.push(k)}}return g}},getQuery:function(a){return a?d.queries[a]:d.queries.defaultQuery},getResponse:function(a){return a?d.queries[a].response:d.queries.defaultQuery.response},init:function(a,c,b){d.windowLocationHasQuery(window.location.hash,a.QUERY_DELIMITER)?d.queries.defaultQuery=d.getCurrentQuery($scope,window.location.hash,a):d.queries.defaultQuery=d.createQuery(a,c,b)},isValidQuery:function(a){for(var c=0;c<a.length;c++)if(null!=a[c]&&" "!=a[c])return!0;return!1},setPage:function(a,
c){c?d.queries[c].setOption("start",a):d.queries.defaultQuery.setOption("start",a)},setQuery:function(a,c){c?d.queries[c]=a:d.queries.defaultQuery=a},setWindowLocation:function(a,c,b){a="";c.view&&(a=c.view);c.query&&(a=a+"/"+b+c.query.getHash());console.log("Setting hash as: "+a);window.location.hash=a},handleFacetListUpdate:function(){d.error=null;d.message=null;for(var a in d.queries)d.queries.hasOwnProperty(a)&&d.updateQuery(a)},updateQuery:function(a){d.error=null;d.message=null;var c=d.queries[a];
if(c){var g=c.getUrl();console.log("GET "+a+": "+g);b.get(g).success(function(b){c.setHighlighting(b.highlighting);b.hasOwnProperty("facet_counts")&&c.setFacetCounts(b.facet_counts);c.setResponse(b.response);c.setResponseHeader(b.responseHeader);e.$broadcast(a)}).error(function(b,g,m,n){d.error="Could not get search results from server. Server responded with status code "+g+".";c.setFacetCounts([]);c.setHighlighting({});c.setResponse({numFound:0,start:0,docs:[]});c.setResponseHeader({});e.$broadcast(a)})}},
windowLocationHasQuery:function(a,c){return-1!=a.indexOf(c)}};d.init(c,b,e);return d}]).value("version","0.1");"use strict";
angular.module("Utils",[]).factory("Utils",[function(){var e={convertMonthIndexToName:function(b){return{"01":"January","02":"February","03":"March","04":"April","05":"May","06":"June","07":"July","08":"August","09":"September",10:"October",11:"November",12:"December"}[b]},formatDate:function(b){if(b){var a=b.indexOf("T");if(a){b=b.substring(0,a).split("-");var a=b[0],c=e.convertMonthIndexToName(b[1]);e.trimLeadingZero(b[2]);return c+", "+a}}return""},startsWith:function(b,a){return b&&a?b.slice(0,
a.length)==a:!1},trim:function(b){return b.replace(/^\s\s*/,"").replace(/\s\s*$/,"")},trimLeadingZero:function(b){b&&0<b.length&&"0"==b.substring(0,1)&&1<b.length&&(b=b.substring(1,1));return b},truncate:function(b,a){if(b&&a&&b.length>a){b=e.trim(b);b=b.substring(0,Math.min(a,b.length));var c=b.lastIndexOf(" ");-1!=c&&(b=b.substring(0,c)+" ...")}return b},truncateField:function(b,a,c){b&&b[a]&&(b[a]instanceof Array&&(b[a]=b[a][0]),b[a].length>c&&(b[a]=e.trim(b[a]),b[a]=b[a].substring(0,Math.min(c,
b[a].length)),c=b[a].lastIndexOf(" "),-1!=c&&(b[a]=b[a].substring(0,c)+" ...")))}};return e}]);"use strict";
angular.module("SelectionSetService",[]).factory("SelectionSetService",["$rootScope",function(e){var b={documents:{},multipleSelection:!1};Array.prototype.remove=function(a,c){var b=this.slice((c||a)+1||this.length);this.length=0>a?this.length+a:a;return this.push.apply(this,b)};b.add=function(a,c){b.multipleSelection||(b.documents={});b.documents[a]=c;e.$broadcast("selectionSetUpdate")};b.clear=function(){b.documents={};e.$broadcast("selectionSetUpdate")};b.get=function(a){return b.documents[a]};
b.getSelectionSet=function(){return b.documents};b.remove=function(a){delete b.documents[a];e.$broadcast("selectionSetUpdate")};return b}]);"use strict";
function SolrFacet(e,b){var a=this;a.field=e;a.value=b;a.options={};a.getOption=function(c){if("q"!=c&&a.options[c])return a.options[c]};a.getUrlFragment=function(){var c;c="&&"+("&fq="+a.field+":("+a.replaceSpaces(a.value)+")");for(var b in a.options)a.options.hasOwnProperty(b)&&(c=c+"&"+b+"="+a.options[b]);return c};a.replaceSpaces=function(a){return a.replace(" ","?")};a.setOption=function(c,b){a.options[c]=b};a.setOptionsFromQuery=function(c){c=c.split("&");for(var b=0;b<c.length;b++){var f=c[b];
if(null!=f&&""!=f){var f=f.split("="),h=f[0].replace("&","");"fq"==h?2==f.length&&(f=f[1].split(":"),a.field=f[0],a.value=f[1]):2==f.length?a.setOption(h,decodeURI(f[1])):a.setOption(h,"")}}}}
function SolrQuery(e,b){var a=this;a.facets={};a.facet_counts={};a.highlighting={};a.options={};a.response={};a.responseHeader={};a.query="*:*";a.queryParameters={};a.url=e+"/"+b+"/select?";a.addFacet=function(c,b){a.facets[c]=b};a.getFacetCounts=function(){return a.facet_counts};a.getFacets=function(){var c=[],b;for(b in a.facets)c.push(a.facets[b]);return c};a.getFacetsAsDictionary=function(){return a.facets};a.getHash=function(){var c;c="q="+a.query;for(var b in a.queryParameters)c+=a.queryParameters[b];
for(b in a.options)c+="&"+b+"="+a.options[b];for(b in a.facets)c+=a.facets[b].getUrlFragment();return c};a.getOption=function(c){if(a.options[c])return a.options[c]};a.getUrl=function(){return a.url+encodeURI(a.getHash())};a.getUserQuery=function(){return a.query};a.getUserQueryParameters=function(){return a.queryParameters};a.removeFacet=function(c){for(var b in a.facets)if(a.facets[b].field==c){delete a.facets[b];break}};a.removeOption=function(c){delete a.options[c]};a.setFacetCounts=function(c){a.facet_counts=
c};a.setHighlighting=function(c){a.highlighting=c};a.setOption=function(c,b){if("fq"===c){var f=a.getOption(c);a.options[c]=void 0!=f&&""==f?f+" +"+b:"+"+b}else a.options[c]=b};a.setQuery=function(c){a.query=c};a.setQueryFromHash=function(c){c=c.split("&");for(var b=0;b<c.length;b++){var f=c[b];if(null!=f&&""!=f){var f=f.split("="),h=f[0].replace("&","");2==f.length?a.setOption(h,decodeURI(f[1])):a.setOption(h,"")}}};a.setQueryParameter=function(c,b){a.queryParameters[c]=b};a.setQueryParameters=function(c){a.queryParameters=
c};a.setResponse=function(c){a.response=c};a.setResponseHeader=function(c){a.responseHeader=c}}
angular.module("SolrSearchService",[]).factory("SolrSearchService",["$rootScope","$http","$location","CONSTANTS",function(e,b,a,c){var d={error:void 0,message:void 0,queries:{},createFacet:function(a,c){return new SolrFacet(a,c)},createQuery:function(){var a=new SolrQuery(c.SOLR_BASE,c.SOLR_CORE);a.setOption("rows",c.ITEMS_PER_PAGE);a.setOption("fl",c.DEFAULT_FIELDS);a.setOption("wt","json");a.setQuery(c.DEFAULT_QUERY);return a},getCurrentQuery:function(a){var b=a.indexOf(c.QUERY_DELIMITER);if(-1!=
b){a.substring(1,b).replace(RegExp("/","g"),"");a=a.substring(b+1).split(c.FACET_DELIMITER);if(0<a.length){var e=new SolrQuery(c.SOLR_BASE,c.SOLR_CORE);e.setOption("fl",c.DEFAULT_FIELDS);e.setOption("hl.fl",d.highlightingParameters);e.setOption("indent","on");e.setOption("rows",d.itemsPerPage);e.setOption("start",0);e.setOption("version",c.SOLR_VERSION);e.setOption("wt","json");e.setQueryFromHash(a[0]);e.setQuery("q",c.DEFAULT_QUERY);for(b=1;b<a.length;b++){var l=a[b],k=new SolrFacet;k.setOptionsFromQuery(l);
e.facets.push(k)}}return e}},getQuery:function(a){return a?d.queries[a]:d.queries.defaultQuery},getResponse:function(a){return a?d.queries[a].response:d.queries.defaultQuery.response},init:function(a,c,b){d.windowLocationHasQuery(window.location.hash,a.QUERY_DELIMITER)?d.queries.defaultQuery=d.getCurrentQuery($scope,window.location.hash,a):d.queries.defaultQuery=d.createQuery(a,c,b)},isValidQuery:function(a){for(var c=0;c<a.length;c++)if(null!=a[c]&&" "!=a[c])return!0;return!1},setPage:function(a,
c){c?d.queries[c].setOption("start",a):d.queries.defaultQuery.setOption("start",a)},setQuery:function(a,c){c?d.queries[c]=a:d.queries.defaultQuery=a},setWindowLocation:function(a,c,b){a="";c.view&&(a=c.view);c.query&&(a=a+"/"+b+c.query.getHash());console.log("Setting hash as: "+a);window.location.hash=a},handleFacetListUpdate:function(){d.error=null;d.message=null;for(var a in d.queries)d.queries.hasOwnProperty(a)&&d.updateQuery(a)},updateQuery:function(a){d.error=null;d.message=null;var c=d.queries[a];
if(c){var g=c.getUrl();console.log("GET "+a+": "+g);b.get(g).success(function(b){c.setHighlighting(b.highlighting);b.hasOwnProperty("facet_counts")&&c.setFacetCounts(b.facet_counts);c.setResponse(b.response);c.setResponseHeader(b.responseHeader);e.$broadcast(a)}).error(function(b,g,m,n){d.error="Could not get search results from server. Server responded with status code "+g+".";c.setFacetCounts([]);c.setHighlighting({});c.setResponse({numFound:0,start:0,docs:[]});c.setResponseHeader({});e.$broadcast(a)})}},
windowLocationHasQuery:function(a,c){return-1!=a.indexOf(c)}};d.init(c,b,e);return d}]).value("version","0.1");"use strict";
angular.module("Utils",[]).factory("Utils",[function(){var e={convertMonthIndexToName:function(b){return{"01":"January","02":"February","03":"March","04":"April","05":"May","06":"June","07":"July","08":"August","09":"September",10:"October",11:"November",12:"December"}[b]},formatDate:function(b){if(b){var a=b.indexOf("T");if(a){b=b.substring(0,a).split("-");var a=b[0],c=e.convertMonthIndexToName(b[1]);e.trimLeadingZero(b[2]);return c+", "+a}}return""},startsWith:function(b,a){return b&&a?b.slice(0,
a.length)==a:!1},trim:function(b){return b.replace(/^\s\s*/,"").replace(/\s\s*$/,"")},trimLeadingZero:function(b){b&&0<b.length&&"0"==b.substring(0,1)&&1<b.length&&(b=b.substring(1,1));return b},truncate:function(b,a){if(b&&a&&b.length>a){b=e.trim(b);b=b.substring(0,Math.min(a,b.length));var c=b.lastIndexOf(" ");-1!=c&&(b=b.substring(0,c)+" ...")}return b},truncateField:function(b,a,c){b&&b[a]&&(b[a]instanceof Array&&(b[a]=b[a][0]),b[a].length>c&&(b[a]=e.trim(b[a]),b[a]=b[a].substring(0,Math.min(c,
b[a].length)),c=b[a].lastIndexOf(" "),-1!=c&&(b[a]=b[a].substring(0,c)+" ...")))}};return e}]);"use strict";
angular.module("SelectionSetService",[]).factory("SelectionSetService",["$rootScope",function(e){var b={documents:{},multipleSelection:!1};Array.prototype.remove=function(a,c){var b=this.slice((c||a)+1||this.length);this.length=0>a?this.length+a:a;return this.push.apply(this,b)};b.add=function(a,c){b.multipleSelection||(b.documents={});b.documents[a]=c;e.$broadcast("selectionSetUpdate")};b.clear=function(){b.documents={};e.$broadcast("selectionSetUpdate")};b.get=function(a){return b.documents[a]};
b.getSelectionSet=function(){return b.documents};b.remove=function(a){delete b.documents[a];e.$broadcast("selectionSetUpdate")};return b}]);"use strict";
function SolrFacet(e,b){var a=this;a.field=e;a.value=b;a.options={};a.getOption=function(c){if("q"!=c&&a.options[c])return a.options[c]};a.getUrlFragment=function(){var c;c="&&"+("&fq="+a.field+":("+a.replaceSpaces(a.value)+")");for(var b in a.options)a.options.hasOwnProperty(b)&&(c=c+"&"+b+"="+a.options[b]);return c};a.replaceSpaces=function(a){return a.replace(" ","?")};a.setOption=function(c,b){a.options[c]=b};a.setOptionsFromQuery=function(c){c=c.split("&");for(var b=0;b<c.length;b++){var f=c[b];
if(null!=f&&""!=f){var f=f.split("="),h=f[0].replace("&","");"fq"==h?2==f.length&&(f=f[1].split(":"),a.field=f[0],a.value=f[1]):2==f.length?a.setOption(h,decodeURI(f[1])):a.setOption(h,"")}}}}
function SolrQuery(e,b){var a=this;a.facets={};a.facet_counts={};a.highlighting={};a.options={};a.response={};a.responseHeader={};a.query="*:*";a.queryParameters={};a.url=e+"/"+b+"/select?";a.addFacet=function(c,b){a.facets[c]=b};a.getFacetCounts=function(){return a.facet_counts};a.getFacets=function(){var c=[],b;for(b in a.facets)c.push(a.facets[b]);return c};a.getFacetsAsDictionary=function(){return a.facets};a.getHash=function(){var c;c="q="+a.query;for(var b in a.queryParameters)c+=a.queryParameters[b];
for(b in a.options)c+="&"+b+"="+a.options[b];for(b in a.facets)c+=a.facets[b].getUrlFragment();return c};a.getOption=function(c){if(a.options[c])return a.options[c]};a.getUrl=function(){return a.url+encodeURI(a.getHash())};a.getUserQuery=function(){return a.query};a.getUserQueryParameters=function(){return a.queryParameters};a.removeFacet=function(c){for(var b in a.facets)if(a.facets[b].field==c){delete a.facets[b];break}};a.removeOption=function(c){delete a.options[c]};a.setFacetCounts=function(c){a.facet_counts=
c};a.setHighlighting=function(c){a.highlighting=c};a.setOption=function(c,b){if("fq"===c){var f=a.getOption(c);a.options[c]=void 0!=f&&""==f?f+" +"+b:"+"+b}else a.options[c]=b};a.setQuery=function(b){a.query=b};a.setQueryFromHash=function(b){b=b.split("&");for(var d=0;d<b.length;d++){var f=b[d];if(null!=f&&""!=f){var f=f.split("="),h=f[0].replace("&","");2==f.length?a.setOption(h,decodeURI(f[1])):a.setOption(h,"")}}};a.setQueryParameter=function(b,d){a.queryParameters[b]=d};a.setQueryParameters=function(b){a.queryParameters=
b};a.setResponse=function(b){a.response=b};a.setResponseHeader=function(b){a.responseHeader=b}}
angular.module("SolrSearchService",[]).factory("SolrSearchService",["$rootScope","$http","$location","CONSTANTS",function(e,b,a,c){var d={error:void 0,message:void 0,queries:{},createFacet:function(a,b){return new SolrFacet(a,b)},createQuery:function(){var a=new SolrQuery(c.SOLR_BASE,c.SOLR_CORE);a.setOption("rows",c.ITEMS_PER_PAGE);a.setOption("fl",c.DEFAULT_FIELDS);a.setOption("wt","json");a.setQuery(c.DEFAULT_QUERY);return a},getCurrentQuery:function(a){var b=a.indexOf(c.QUERY_DELIMITER);if(-1!=
b){a.substring(1,b).replace(RegExp("/","g"),"");a=a.substring(b+1).split(c.FACET_DELIMITER);if(0<a.length){var e=new SolrQuery(c.SOLR_BASE,c.SOLR_CORE);e.setOption("fl",c.DEFAULT_FIELDS);e.setOption("hl.fl",d.highlightingParameters);e.setOption("indent","on");e.setOption("rows",d.itemsPerPage);e.setOption("start",0);e.setOption("version",c.SOLR_VERSION);e.setOption("wt","json");e.setQueryFromHash(a[0]);e.setQuery("q",c.DEFAULT_QUERY);for(b=1;b<a.length;b++){var l=a[b],k=new SolrFacet;k.setOptionsFromQuery(l);
e.facets.push(k)}}return e}},getQuery:function(a){return a?d.queries[a]:d.queries.defaultQuery},getResponse:function(a){return a?d.queries[a].response:d.queries.defaultQuery.response},init:function(a,b,c){d.windowLocationHasQuery(window.location.hash,a.QUERY_DELIMITER)?d.queries.defaultQuery=d.getCurrentQuery($scope,window.location.hash,a):d.queries.defaultQuery=d.createQuery(a,b,c)},isValidQuery:function(a){for(var b=0;b<a.length;b++)if(null!=a[b]&&" "!=a[b])return!0;return!1},setPage:function(a,
b){b?d.queries[b].setOption("start",a):d.queries.defaultQuery.setOption("start",a)},setQuery:function(a,b){b?d.queries[b]=a:d.queries.defaultQuery=a},setWindowLocation:function(a,b,c){a="";b.view&&(a=b.view);b.query&&(a=a+"/"+c+b.query.getHash());console.log("Setting hash as: "+a);window.location.hash=a},handleFacetListUpdate:function(){d.error=null;d.message=null;for(var a in d.queries)d.queries.hasOwnProperty(a)&&d.updateQuery(a)},updateQuery:function(a){d.error=null;d.message=null;var c=d.queries[a];
if(c){var g=c.getUrl();console.log("GET "+a+": "+g);b.get(g).success(function(b){c.setHighlighting(b.highlighting);b.hasOwnProperty("facet_counts")&&c.setFacetCounts(b.facet_counts);c.setResponse(b.response);c.setResponseHeader(b.responseHeader);e.$broadcast(a)}).error(function(b,g,m,n){d.error="Could not get search results from server. Server responded with status code "+g+".";c.setFacetCounts([]);c.setHighlighting({});c.setResponse({numFound:0,start:0,docs:[]});c.setResponseHeader({});e.$broadcast(a)})}},
windowLocationHasQuery:function(a,b){return-1!=a.indexOf(b)}};d.init(c,b,e);return d}]).value("version","0.1");"use strict";
angular.module("Utils",[]).factory("Utils",[function(){var e={convertMonthIndexToName:function(b){return{"01":"January","02":"February","03":"March","04":"April","05":"May","06":"June","07":"July","08":"August","09":"September",10:"October",11:"November",12:"December"}[b]},formatDate:function(b){if(b){var a=b.indexOf("T");if(a){b=b.substring(0,a).split("-");var a=b[0],c=e.convertMonthIndexToName(b[1]);e.trimLeadingZero(b[2]);return c+", "+a}}return""},startsWith:function(b,a){return b&&a?b.slice(0,
a.length)==a:!1},trim:function(b){return b.replace(/^\s\s*/,"").replace(/\s\s*$/,"")},trimLeadingZero:function(b){b&&0<b.length&&"0"==b.substring(0,1)&&1<b.length&&(b=b.substring(1,1));return b},truncate:function(b,a){if(b&&a&&b.length>a){b=e.trim(b);b=b.substring(0,Math.min(a,b.length));var c=b.lastIndexOf(" ");-1!=c&&(b=b.substring(0,c)+" ...")}return b},truncateField:function(b,a,c){b&&b[a]&&(b[a]instanceof Array&&(b[a]=b[a][0]),b[a].length>c&&(b[a]=e.trim(b[a]),b[a]=b[a].substring(0,Math.min(c,
b[a].length)),c=b[a].lastIndexOf(" "),-1!=c&&(b[a]=b[a].substring(0,c)+" ...")))}};return e}]);"use strict";
angular.module("SelectionSetService",[]).factory("SelectionSetService",["$rootScope",function(e){var b={documents:{},multipleSelection:!1};Array.prototype.remove=function(a,b){var d=this.slice((b||a)+1||this.length);this.length=0>a?this.length+a:a;return this.push.apply(this,d)};b.add=function(a,c){b.multipleSelection||(b.documents={});b.documents[a]=c;e.$broadcast("selectionSetUpdate")};b.clear=function(){b.documents={};e.$broadcast("selectionSetUpdate")};b.get=function(a){return b.documents[a]};
b.getSelectionSet=function(){return b.documents};b.remove=function(a){delete b.documents[a];e.$broadcast("selectionSetUpdate")};return b}]);"use strict";
function SolrFacet(e,b){var a=this;a.field=e;a.value=b;a.options={};a.getOption=function(b){if("q"!=b&&a.options[b])return a.options[b]};a.getUrlFragment=function(){var b;b="&&"+("&fq="+a.field+":("+a.replaceSpaces(a.value)+")");for(var d in a.options)a.options.hasOwnProperty(d)&&(b=b+"&"+d+"="+a.options[d]);return b};a.replaceSpaces=function(a){return a.replace(" ","?")};a.setOption=function(b,d){a.options[b]=d};a.setOptionsFromQuery=function(b){b=b.split("&");for(var d=0;d<b.length;d++){var f=b[d];
if(null!=f&&""!=f){var f=f.split("="),e=f[0].replace("&","");"fq"==e?2==f.length&&(f=f[1].split(":"),a.field=f[0],a.value=f[1]):2==f.length?a.setOption(e,decodeURI(f[1])):a.setOption(e,"")}}}}
function SolrQuery(e,b){var a=this;a.facets={};a.facet_counts={};a.highlighting={};a.options={};a.response={};a.responseHeader={};a.query="*:*";a.queryParameters={};a.url=e+"/"+b+"/select?";a.addFacet=function(b,d){a.facets[b]=d};a.getFacetCounts=function(){return a.facet_counts};a.getFacets=function(){var b=[],d;for(d in a.facets)b.push(a.facets[d]);return b};a.getFacetsAsDictionary=function(){return a.facets};a.getHash=function(){var b;b="q="+a.query;for(var d in a.queryParameters)b+=a.queryParameters[d];
for(d in a.options)b+="&"+d+"="+a.options[d];for(d in a.facets)b+=a.facets[d].getUrlFragment();return b};a.getOption=function(b){if(a.options[b])return a.options[b]};a.getUrl=function(){return a.url+encodeURI(a.getHash())};a.getUserQuery=function(){return a.query};a.getUserQueryParameters=function(){return a.queryParameters};a.removeFacet=function(b){for(var d in a.facets)if(a.facets[d].field==b){delete a.facets[d];break}};a.removeOption=function(b){delete a.options[b]};a.setFacetCounts=function(b){a.facet_counts=
b};a.setHighlighting=function(b){a.highlighting=b};a.setOption=function(b,d){if("fq"===b){var f=a.getOption(b);a.options[b]=void 0!=f&&""==f?f+" +"+d:"+"+d}else a.options[b]=d};a.setQuery=function(b){a.query=b};a.setQueryFromHash=function(b){b=b.split("&");for(var d=0;d<b.length;d++){var f=b[d];if(null!=f&&""!=f){var f=f.split("="),e=f[0].replace("&","");2==f.length?a.setOption(e,decodeURI(f[1])):a.setOption(e,"")}}};a.setQueryParameter=function(b,d){a.queryParameters[b]=d};a.setQueryParameters=function(b){a.queryParameters=
b};a.setResponse=function(b){a.response=b};a.setResponseHeader=function(b){a.responseHeader=b}}
angular.module("SolrSearchService",[]).factory("SolrSearchService",["$rootScope","$http","$location","CONSTANTS",function(e,b,a,c){var d={error:void 0,message:void 0,queries:{},createFacet:function(a,b){return new SolrFacet(a,b)},createQuery:function(){var a=new SolrQuery(c.SOLR_BASE,c.SOLR_CORE);a.setOption("rows",c.ITEMS_PER_PAGE);a.setOption("fl",c.DEFAULT_FIELDS);a.setOption("wt","json");a.setQuery(c.DEFAULT_QUERY);return a},getCurrentQuery:function(a){var b=a.indexOf(c.QUERY_DELIMITER);if(-1!=
b){a.substring(1,b).replace(RegExp("/","g"),"");a=a.substring(b+1).split(c.FACET_DELIMITER);if(0<a.length){var e=new SolrQuery(c.SOLR_BASE,c.SOLR_CORE);e.setOption("fl",c.DEFAULT_FIELDS);e.setOption("hl.fl",d.highlightingParameters);e.setOption("indent","on");e.setOption("rows",d.itemsPerPage);e.setOption("start",0);e.setOption("version",c.SOLR_VERSION);e.setOption("wt","json");e.setQueryFromHash(a[0]);e.setQuery("q",c.DEFAULT_QUERY);for(b=1;b<a.length;b++){var l=a[b],k=new SolrFacet;k.setOptionsFromQuery(l);
e.facets.push(k)}}return e}},getQuery:function(a){return a?d.queries[a]:d.queries.defaultQuery},getResponse:function(a){return a?d.queries[a].response:d.queries.defaultQuery.response},init:function(a,b,c){d.windowLocationHasQuery(window.location.hash,a.QUERY_DELIMITER)?d.queries.defaultQuery=d.getCurrentQuery($scope,window.location.hash,a):d.queries.defaultQuery=d.createQuery(a,b,c)},isValidQuery:function(a){for(var b=0;b<a.length;b++)if(null!=a[b]&&" "!=a[b])return!0;return!1},setPage:function(a,
b){b?d.queries[b].setOption("start",a):d.queries.defaultQuery.setOption("start",a)},setQuery:function(a,b){b?d.queries[b]=a:d.queries.defaultQuery=a},setWindowLocation:function(a,b,c){a="";b.view&&(a=b.view);b.query&&(a=a+"/"+c+b.query.getHash());console.log("Setting hash as: "+a);window.location.hash=a},handleFacetListUpdate:function(){d.error=null;d.message=null;for(var a in d.queries)d.queries.hasOwnProperty(a)&&d.updateQuery(a)},updateQuery:function(a){d.error=null;d.message=null;var c=d.queries[a];
if(c){var g=c.getUrl();console.log("GET "+a+": "+g);b.get(g).success(function(b){c.setHighlighting(b.highlighting);b.hasOwnProperty("facet_counts")&&c.setFacetCounts(b.facet_counts);c.setResponse(b.response);c.setResponseHeader(b.responseHeader);e.$broadcast(a)}).error(function(b,g,m,n){d.error="Could not get search results from server. Server responded with status code "+g+".";c.setFacetCounts([]);c.setHighlighting({});c.setResponse({numFound:0,start:0,docs:[]});c.setResponseHeader({});e.$broadcast(a)})}},
windowLocationHasQuery:function(a,b){return-1!=a.indexOf(b)}};d.init(c,b,e);return d}]).value("version","0.1");"use strict";
angular.module("Utils",[]).factory("Utils",[function(){var e={convertMonthIndexToName:function(b){return{"01":"January","02":"February","03":"March","04":"April","05":"May","06":"June","07":"July","08":"August","09":"September",10:"October",11:"November",12:"December"}[b]},formatDate:function(b){if(b){var a=b.indexOf("T");if(a){b=b.substring(0,a).split("-");var a=b[0],c=e.convertMonthIndexToName(b[1]);e.trimLeadingZero(b[2]);return c+", "+a}}return""},startsWith:function(b,a){return b&&a?b.slice(0,
a.length)==a:!1},trim:function(b){return b.replace(/^\s\s*/,"").replace(/\s\s*$/,"")},trimLeadingZero:function(b){b&&0<b.length&&"0"==b.substring(0,1)&&1<b.length&&(b=b.substring(1,1));return b},truncate:function(b,a){if(b&&a&&b.length>a){b=e.trim(b);b=b.substring(0,Math.min(a,b.length));var c=b.lastIndexOf(" ");-1!=c&&(b=b.substring(0,c)+" ...")}return b},truncateField:function(b,a,c){b&&b[a]&&(b[a]instanceof Array&&(b[a]=b[a][0]),b[a].length>c&&(b[a]=e.trim(b[a]),b[a]=b[a].substring(0,Math.min(c,
b[a].length)),c=b[a].lastIndexOf(" "),-1!=c&&(b[a]=b[a].substring(0,c)+" ...")))}};return e}]);
